function _edd_dragDrop(e,t,n){if(window.File&&window.FileList&&window.FileReader){var r=false;var i=document.getElementById("canvas");if(document.getElementById("unityPlayer")){r=true;i=document.getElementById("unityPlayer").firstChild}var s;var o;function a(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}else{e["on"+t]=n}}function f(t){if(t.preventDefault){t.preventDefault()}var n=t.originalEvent||t;s=n.offsetX;o=n.offsetY;if(s==undefined||o==undefined){s=n.layerX;o=n.layerY}s=s-(i.offsetLeft-i.scrollLeft);o=o-(i.offsetTop-i.scrollTop);if(r)u.getUnity().SendMessage(e,"ExternalDragOver",""+s+","+o);else SendMessage(e,"ExternalDragOver",""+s+","+o);return false}function l(t){if(t.preventDefault){t.preventDefault()}if(r)u.getUnity().SendMessage(e,"ExternalDragCancel","");else SendMessage(e,"ExternalDragCancel","");return false}a(i,"dragover",f);a(i,"dragenter",f);a(i,"dragleave",l);a(i,"drop",function(f){f=f||window.event;if(f.preventDefault){f.preventDefault()}var l=f.originalEvent||f;s=l.offsetX;o=l.offsetY;if(s==undefined||o==undefined){s=l.layerX;o=l.layerY}s=s-(i.offsetLeft-i.scrollLeft);o=o-(i.offsetTop-i.scrollTop);var c=f.target.files||f.dataTransfer.files;if(r)u.getUnity().SendMessage(e,"ExternalDroppedFilesCount",""+c.length);else SendMessage(e,"ExternalDroppedFilesCount",""+c.length);var h=new Array;var p=new Array;for(var d=0;d<c.length;d++){var v=c[d];if(v.size<t*1024*1024){var m=v.name;var g=new FileReader;h.push(g);p.push(m);a(g,"load",function(t){for(var n=0;n<h.length;n++){if(h[n]==this)m=p[n]}var i=m+";"+this.result;var a=128*1024;for(var f=0;f<i.length;f+=a){if(i.length>f+a){if(r)u.getUnity().SendMessage(e,"ExternalDragDataChunk",i.substring(f,f+a));else SendMessage(e,"ExternalDragDataChunk",i.substring(f,f+a))}else{if(r)u.getUnity().SendMessage(e,"ExternalDragDataChunk",i.substring(f));else SendMessage(e,"ExternalDragDataChunk",i.substring(f))}}if(r)u.getUnity().SendMessage(e,"ExternalDragEnd",""+s+","+o);else SendMessage(e,"ExternalDragEnd",""+s+","+o)});g.readAsDataURL(v)}else{alert(n+" (max "+t+"MB)")}}return false})}else{alert("Your browser does not support HTML5 drag & drop.")}}